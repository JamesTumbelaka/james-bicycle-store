{% extends 'base.html' %}

{% block content %}
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid">
        <a class="navbar-brand">James Bicycle Store</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="{% url 'main:create_product' %}">Add Product</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="{% url 'main:logout' %}">Logout</a>
                </li>
            </ul>
        </div>
        </div>
    </nav>

    <br />

    <div class="card" style="width: 18rem;">
        <ul class="list-group list-group-flush">
          <li class="list-group-item">Nama  : {{ name }}</li>
          <li class="list-group-item">Kelas : {{ class }}</li>
        </ul>
      </div>

    <br />

    <div class="current_total_item">
        <p>anda menyimpan {{ total_items }} sepeda pada aplikasi ini</p>
    </div>
    
    <table class="box">
        <thead>
            <tr>
                <th class="box-0lax">Name</th>
                <th class="box-0lax">Price</th>
                <th class="box-0lax">Amount</th>
                <th class="box-0lax">Add/Sub</th>
                <th class="box-0lax">Description</th>
                <th class="box-0lax">Date Added</th>
                <th class="box-0lax">Options</th>
            </tr>
        </thead>

        {% comment %} Berikut cara memperlihatkan data produk di bawah baris ini {% endcomment %}
        <tbody>
            {% for product in products %}
                <tr>
                    <td class="box-0lax">{{ product.name }}</td>
                    <td class="box-0lax">{{ product.price }}</td>
                    <td class="box-0lax">{{ product.amount }}</td>
                    <td class="box-0lax">
                        <form method="POST" action="{% url 'main:decrement_amount' product.id %}">
                            {% csrf_token %}
                            <button type="submit">sub</button>
                        </form>
                        <form method="POST" action="{% url 'main:increment_amount' product.id %}">
                            {% csrf_token %}
                            <button type="submit">add</button>
                        </form>
                    </td>
                    <td class="box-0lax">{{ product.description }}</td>
                    <td class="box-0lax">{{ product.date_added }}</td>
                    <td class="box-0lax">
                        <a href="{% url 'main:edit_product' product.id %}">Edit</a>
                        <a href="{% url 'main:delete_product' product.id %}">Delete</a>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <br />

    <div style="text-align: center;">
        <h5>Sesi terakhir login: {{ last_login }}</h5>
    </div>

    <br />

    <div class="marquee-container">
        <marquee behavior="scroll" direction="right" style="color: white ; font-size: 20px;" class="marquee-container" scrollamount="15">
            Selamat Datang di Toko Kami !
        </marquee>
    </div>

{% endblock content %}